# ðŸ“¦ Projet Terraform â€“ Infrastructure AWS pour Application de RÃ©servation

## âœ¨ Objectif
Ce projet met en place une infrastructure cloud complÃ¨te et modulaire sur AWS pour une application de rÃ©servation. Elle est dÃ©crite Ã  l'aide de Terraform, selon une architecture multi-AZ et conforme aux bonnes pratiques DevOps.

## ðŸ—‚ï¸ Arborescence du projet

```
TABLE-RESERVE-INFRA/
â”œâ”€â”€ modules/                        # Modules Terraform rÃ©utilisables
â”‚   â”œâ”€â”€ acm                         # Certificats ACM (frontend/backend)
â”‚   â”œâ”€â”€ alb                         # Load Balancer HTTP/HTTPS
â”‚   â”œâ”€â”€ aurora                      # Cluster RDS Aurora PostgreSQL
â”‚   â”œâ”€â”€ bastion                     # EC2 Bastion host pour accÃ¨s SSH
â”‚   â”œâ”€â”€ cloudfront                  # CDN pour le frontend
â”‚   â”œâ”€â”€ cloudwatch                  # Logs ECS et mÃ©triques CloudWatch
â”‚   â”œâ”€â”€ cognito                     # Authentification utilisateur
â”‚   â”œâ”€â”€ ecr                         # Registry pour les images Docker
â”‚   â”œâ”€â”€ ecs-fargate                 # DÃ©ploiement backend via ECS Fargate
â”‚   â”œâ”€â”€ iam                         # RÃ´les IAM nÃ©cessaires
â”‚   â”œâ”€â”€ kms                         # ClÃ©s de chiffrement (optionnel)
â”‚   â”œâ”€â”€ Route53                     # Enregistrements DNS
â”‚   â”œâ”€â”€ s3                          # Buckets S3 (frontend et logs)
â”‚   â”œâ”€â”€ security                    # CloudTrail, GuardDuty, Budget
â”‚   â”œâ”€â”€ sg                          # Security Groups (ECS, Bastion, ALB...)
â”‚   â”œâ”€â”€ vpc                         # CrÃ©ation des VPCs publics/privÃ©s
â”‚   â”œâ”€â”€ vpc-peering                 # Peering entre VPC 1 et VPC 2
â”‚   â”œâ”€â”€ waf                         # Web Application Firewall (CloudFront)
â”‚   â””â”€â”€ websocket                   # API Gateway WebSocket
â”‚
â”œâ”€â”€ project-root/
â”‚   â”œâ”€â”€ main.tf                     # Composition globale (appel modules)
â”‚   â”œâ”€â”€ variables.tf                # Variables globales
â”‚   â”œâ”€â”€ outputs.tf                  # Valeurs exportÃ©es
â”‚   â”œâ”€â”€ provider.tf                 # Configuration AWS (multi-region)
â”‚   â”œâ”€â”€ terraform.tfvars            # Valeurs concrÃ¨tes des variables
â”‚   â”œâ”€â”€ terraform.lock.hcl          # Lockfile provider
â”‚   â”œâ”€â”€ tfplan                      # Plan terraform (binaire)
â”‚   â””â”€â”€ README.md                   # Ce fichier
```

## â˜ï¸ Stack AWS utilisÃ©e

- **Amazon VPC** â€“ Deux VPCs interconnectÃ©s (peering)
- **ALB** â€“ Pour l'exposition du backend (HTTPS)
- **Amazon ECS (Fargate)** â€“ DÃ©ploiement du backend
- **Amazon Aurora** â€“ Base de donnÃ©es PostgreSQL
- **Amazon Cognito** â€“ Authentification utilisateurs
- **Amazon CloudFront + S3** â€“ Distribution frontend statique
- **Amazon WAF** â€“ Protection contre attaques web courantes
- **API Gateway WebSocket** â€“ Communication temps rÃ©el
- **IAM, CloudWatch, GuardDuty, Budgets** â€“ SÃ©curitÃ© et monitoring

## ðŸ” SÃ©curitÃ©

- Utilisation de `aws-vault` pour gÃ©rer les credentials AWS de faÃ§on sÃ©curisÃ©e
- Les rÃ´les IAM sont strictement dÃ©finis pour les services nÃ©cessaires
- SÃ©curitÃ© rÃ©seau assurÃ©e par des SG bien cloisonnÃ©s et des subnets privÃ©s/publics

## âš ï¸ ProblÃ¨me volontaire sur Route53

L'erreur suivante apparaÃ®t lors du `terraform plan` :

``
Error: no matching Route 53 Hosted Zone found
```

ðŸŽ¯ **Explication** :
Le module `Route53` tente de rechercher une zone DNS (`data "aws_route53_zone"`) correspondant au domaine `"example.com"` mais celle-ci **nâ€™a pas Ã©tÃ© crÃ©Ã©e dans AWS**.

ðŸ‘‰ Ce comportement est attendu et volontaire :
- Pour les besoins du test, il nâ€™Ã©tait **pas requis de provisionner une vraie zone Route53**.
- Il suffit de crÃ©er cette zone dans AWS ou de **commenter temporairement le module Route53** si non nÃ©cessaire.

## ðŸš€ DÃ©ploiement (local avec `aws-vault`)

```bash
# Initialisation
aws-vault exec unify -- terraform init

# VÃ©rification de la validitÃ©
aws-vault exec unify -- terraform validate

# GÃ©nÃ©ration du plan (sans apply)
aws-vault exec unify -- terraform plan -out=tfplan
```

## ðŸ“ Auteur

**Fabrice TSAFACK**  
DevSecOps | Cloud | SÃ©curitÃ© | Terraform | Kubernetes  
> `ronicefabrice@gmail.com